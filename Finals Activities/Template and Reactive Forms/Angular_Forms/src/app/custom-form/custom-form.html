<div class="content-area">
  <div class="card">
    <h2>Project Proposal</h2>
    <form [formGroup]="projectForm" (ngSubmit)="onSubmit()">

      <div class="form-group">
        <label>Project Name</label>
        <input class="input" formControlName="projectName" placeholder="e.g., E-commerce Redesign" />
        @if (isInvalid('projectName')) { <small class="error">Name must be at least 5 characters</small> }
      </div>

      <div class="form-group">
        <label>Category</label>
        <select class="input" formControlName="category">
          <option value="" disabled>Select a category</option>
          @for (cat of categories; track cat) {
            <option [value]="cat">{{ cat }}</option>
          }
        </select>
      </div>

      <div class="form-group">
        <label>Deadline</label>
        <input class="input" type="date" formControlName="deadline" />
      </div>

      <div class="form-group">
        <label>Budget (USD): ${{ projectForm.value.budget }}</label>
        <input type="range" min="100" max="10000" step="100" formControlName="budget" style="width: 100%; accent-color: #111;">
      </div>

      <div class="form-group">
        <label>Priority</label>
        <div class="radio-group">
          <label><input type="radio" value="Low" formControlName="priority"> Low</label>
          <label><input type="radio" value="Medium" formControlName="priority"> Medium</label>
          <label><input type="radio" value="High" formControlName="priority"> High</label>
        </div>
      </div>

      <div class="form-group checkbox-group">
        <label class="switch">
          <input type="checkbox" formControlName="agreeToTerms">
          <span class="slider"></span>
        </label>
        <span>I agree to the project terms</span>
        @if (isInvalid('agreeToTerms')) { <small class="error">Agreement required</small> }
      </div>

      <div class="form-group">
        <label>Description</label>
        <textarea class="input" rows="4" formControlName="description" placeholder="Describe the goals..."></textarea>
      </div>

      <button class="btn" type="submit" [disabled]="projectForm.invalid">Submit Proposal</button>
    </form>
  </div>

  @if (submitted && dataSummary) {
    <div class="card result-card">
      <div class="result-header">
        <div class="status-badge">Proposal Received</div>
        <h3>{{ dataSummary.projectName }}</h3>
      </div>

      <div class="result-grid">
        <div class="result-item">
          <label>Category</label>
          <span>{{ dataSummary.category }}</span>
        </div>
        <div class="result-item">
          <label>Deadline</label>
          <span>{{ dataSummary.deadline | date:'mediumDate' }}</span>
        </div>
        <div class="result-item">
          <label>Budget</label>
          <span>${{ dataSummary.budget }}</span>
        </div>
        <div class="result-item">
          <label>Priority</label>
          <span class="priority-tag">{{ dataSummary.priority }}</span>
        </div>
        <div class="result-item full-width">
          <label>Description</label>
          <p>{{ dataSummary.description }}</p>
        </div>
      </div>

      <button class="btn secondary-btn" (click)="resetForm()">Start New Proposal</button>
    </div>
  }
</div>
